# —————————
# 基础设置
mixed-port: 7890
redir-port: 7891
tproxy-port: 1536
ipv6: true
mode: Rule
allow-lan: true
disable-keep-alive: true
geodata-mode: false
geo-auto-update: true
geo-update-interval: 24
geox-url:
  asn: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"
experimental:
  http-headers:
    request:
      - name: "User-Agent"
        value: "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Mobile Safari/537.36"
      - name: "Accept-Language"
        value: "en-US,en;q=0.9"
unified-delay: true
tcp-concurrent: true
log-level: silent
find-process-mode: always
global-client-fingerprint: chrome
external-controller: 127.0.0.1:9090 # 切勿修改端口会影响状态栏磁贴
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"
external-ui: "./Web/Zash/"
secret: "" # 面板访问密码，如在公网访问建议设置
# —————————
# ==== Tips

# 1. 修改配置文件保存时，建议重启服务/重载配置.
# —————————



# 节点记忆
profile: # ← 此函数位置请勿变动！此为模块更新时备份恢复订阅变量范围 ↑
  store-selected: true
  store-fake-ip: true
# —————————

# 嗅探模块
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
    TLS:
      ports: [443, 5228, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain: # 如遇需内部通信的应用请放行该域名
    - "Mijia Cloud"
# —————————

# 网卡模块
tun:
  enable: true  # true 开 # false 默认关
  device: Meta
  stack: gvisor
  dns-hijack:
    - any:53
    - tcp://any:53
  udp-timeout: 300
  auto-route: true
  strict-route: true
  auto-redirect: false
  auto-detect-interface: true
  exclude-package:
    # _____________________# 三星专供 ↓ 范围
#    - com.samsung.android.messaging
#    - com.samsung.android.app.telephonyui
#    - com.samsung.android.dialer
#    - com.samsung.android.incallui
#    - com.samsung.android.smartcallprovider
#    - com.samsung.android.intellivoiceservice
#    - com.android.settings
#    - com.qti.qcc
#    - com.sec.epdg
#    - com.sec.imsservice # 三星专供 ↑ 范围
    # 非三星用户不必理会，三星用户需自行取消注释
    
# —————————


# DNS模块
# 请勿随意变动！
dns:
  enable: true
  ipv6: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 172.20.0.1/16
  fake-ip-filter:
    - "+.lan"
    - "+.local"
    - "+.localhost"
    - "+.3gppnetwork.org"
    - "+.xtracloud.net"
  direct-nameserver:
    - https://doh.pub/dns-query#🇨🇳 瓦洛兰大陆&h3=false
    - https://dns.alidns.com/dns-query#🇨🇳 瓦洛兰大陆&h3=true
  proxy-server-nameserver:
    - https://doh.pub/dns-query#🇨🇳 瓦洛兰大陆&h3=false
    - https://dns.alidns.com/dns-query#🇨🇳 瓦洛兰大陆&h3=true
  nameserver-policy: {}
  nameserver:
    - https://dns.google/dns-query#DNS连接&h3=true
    - https://cloudflare-dns.com/dns-query#DNS连接&h3=true
# —————————

proxies:
  - {name: 🇨🇳 瓦洛兰大陆, type: direct, udp: true}
  - {name: ⛔️ 拒绝连接, type: reject}
  - {name: 🌐 DNS_Hijack, type: dns}

proxy-groups:
  - name: 🎯 总模式
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/All.svg"
    type: select
    proxies:
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🔄 订阅更新
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Update.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - 🎯 总模式

  - name: 📕 小红书
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/XiaoHongShu.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - ⛔️ 拒绝连接
      - 🎯 总模式
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区

  - name: 🎵 抖音
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/DouYin.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - ⛔️ 拒绝连接
      - 🎯 总模式
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区

  - name: 🅱️ BiliBili
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/BiliBili.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - ⛔️ 拒绝连接
      - 🎯 总模式
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区

  - name: 🎮 Steam
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Steam.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - ⛔️ 拒绝连接
      - 🎯 总模式
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区

  - name: 🍎 Apple
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Apple.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - ⛔️ 拒绝连接
      - 🎯 总模式
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区

  - name: 🪟 Microsoft
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Microsoft.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - ⛔️ 拒绝连接
      - 🎯 总模式
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区

  - name: ✈️ Telegram
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Telegram.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 💬 Discord
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Discord.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🎧 Spotify
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Spotify.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🎵 TikTok
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/TikTok.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 📺 YouTube
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/YouTube.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🎬 Netflix
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Netflix.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🔍 Google
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Google.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 📱 GoogleFCM
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/GoogleFCM.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 📘 Facebook
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Facebook.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🤖 OpenAI
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/OpenAI.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🐙 GitHub
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/GitHub.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🐦 Twitter(X)
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Twitter.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🌐 DNS连接
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/DNS.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🐟 漏网之鱼
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/HBASE-copy.svg"
    type: select
    proxies:
      - 🎯 总模式
      - ⛔️ 拒绝连接
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区
      - 🇨🇳 瓦洛兰大陆

  - name: 🚫 广告拦截
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/No-ads-all.svg"
    type: select
    proxies:
      - ⛔️ 拒绝连接
      - 🌐 DNS_Hijack
      - REJECT-DROP
      - PASS

  - name: 🔒 WebRTC
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/WebRTC.svg"
    type: select
    proxies:
      - ⛔️ 拒绝连接
      - 🌐 DNS_Hijack
      - REJECT-DROP
      - PASS

  - name: 👤 白名单出站
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/User.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆
      - ⛔️ 拒绝连接
      - 🎯 总模式
      - ⚡ 延迟最低
      - 🔄 故障转移
      - ⚖️ 负载均衡
      - 🇭🇰 香港节点
      - 🇹🇼 台湾节点
      - 🇸🇬 狮城节点
      - 🇯🇵 日本节点
      - 🇺🇸 美国节点
      - 🌍 其它地区

  - name: ⚡ 延迟最低
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Return.svg"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies: []

  - name: 🔄 故障转移
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Return.svg"
    type: fallback
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies: []

  - name: ⚖️ 负载均衡
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Return.svg"
    type: load-balance
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    proxies: []

  - name: 🇹🇼 台湾节点
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/CN.svg"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: "(?i)(台|新北|彰化|TW|Taiwan)"
    proxies: []

  - name: 🇭🇰 香港节点
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/HK.svg"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: "(?i)(港|HK|hk|Hong Kong|HongKong|hongkong)"
    proxies: []

  - name: 🇯🇵 日本节点
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/JP.svg"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: "(?i)(日本|川日|东京|大阪|泉日|埼玉|沪日|深日|[^-]日|JP|Japan)"
    proxies: []

  - name: 🇺🇸 美国节点
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/US.svg"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: "(?i)(美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States)"
    proxies: []

  - name: 🇸🇬 狮城节点
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Singapore.svg"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: "(?i)(新加坡|坡|狮城|SG|Singapore)"
    proxies: []

  - name: 🌍 其它地区
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Globe.svg"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    filter: "^(?!.*(港|HK|hk|Hong Kong|HongKong|hongkong|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|[^-]日|JP|Japan|美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|US|United States|台|新北|彰化|TW|Taiwan|新加坡|坡|狮城|SG|Singapore|灾|网易|Netease|套餐|重置|剩余|到期|订阅|群|账户|流量|有效期|时间|官网)).*$"
    proxies: []

  - name: 📊 CNTEST
    icon: "https://cdn.jsdelivr.net/gh/GitMetaio/Surfing@rm/Home/icon/Meter.svg"
    type: select
    proxies:
      - 🇨🇳 瓦洛兰大陆

rules: ~
